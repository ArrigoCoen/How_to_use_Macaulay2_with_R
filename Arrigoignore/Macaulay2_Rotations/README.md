# Rotation equations with Macaulay2 in the cluster

In this readme file is presented the pipeline of the programs to run in the cluster using the software Macaulay2.

A video tutorial of Macaulay2 is in [here](https://www.youtube.com/watch?v=he3VYZ5iao4&list=RDCMUCW1C2xOfXsIzPgjXyuhkw9g&start_radio=1)

## Connecting to the cluster

Open a terminal and use the commands:
```shell
ssh acoencoria@solislemus-001.discovery.wisc.edu
FpD2!CTe
cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
```

## Copy files from local folder to the cluster

To copy ALL the `.m2` files from the folder `/Users/arrigocoen/Dropbox/1 Phylogenetics/2019/Ransanec/Mathematica/macaulay2/AA_Macaulay2_Rotations` to the folder of cluster, we use:
```
cd "/Users/arrigocoen/Dropbox/1 Phylogenetics/2019/Ransanec/Mathematica/macaulay2/AA_Macaulay2_Rotations"
scp *.m2 acoencoria@solislemus-001.discovery.wisc.edu:/mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
Password
FpD2!CTe
```


## General commands to run a M2 file

First, some important commands to use in the Terminal:
```
Ctrl+a, d                 # to detach the screen.
Ctrl+a, k                 # to KILL the screen
less file_name.extension  # to show the content of a file in the Terminal (q for quit)
screen -ls                # the list of all the screens
```

A complete example of running in the shell. The next lines will create an screen named `name_of_screen` and run the file `file_of_Macaulay2.m2` and save the output `name_of_output_file.txt`

```shell
ssh acoencoria@solislemus-001.discovery.wisc.edu
FpD2!CTe
cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
screen -S name_of_screen
# May 12 10:39 am (current time)
module load M2-1.14
cat file_of_Macaulay2.m2 | M2 &> name_of_output_file.txt
```

## Particular commands to run the needed files

The next texts were generated by the function `text_to_run_Rotations_on_cluster`. This function is in the `Fn phylo R.R` file on the folder `/Users/arrigocoen/Dropbox/1 Phylogenetics/2019/Ransanec/R`
```
cat("\014") # borra consola
rm(list=ls())  # Borra todo
source("Fn phylo R.R")
text_to_run_Rotations_on_cluster()
```
## To do some local runs of Macaulay 2

```
cd "/Users/arrigocoen/Dropbox/1 Phylogenetics/2019/Ransanec/R/Macaulay2_Rotations"
cat  SolveK4_N_allow1112_for_N1vrN2.m2  | M2 &>  SolveK4_N_allow1112_for_N1vrN2_out.txt
```


### To run  SolveK4_N_allow1112_for_N1vrN2.m2   FINISH
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow1112_for_N1vrN2
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow1112_for_N1vrN2.m2  | M2 &>  SolveK4_N_allow1112_for_N1vrN2_out.txt
 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow1112_for_N1vrN2
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow1122_for_N1vrN2.m2   RUNNING  Nov 05 13:00
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow1122_for_N1vrN2
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow1122_for_N1vrN2.m2  | M2 &>  SolveK4_N_allow1122_for_N1vrN2_out.txt
 ```

 Start Nov 05 13:00
 ```shell
 screen -r  SolveK4_N_allow1122_for_N1vrN2
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow1222_for_N1vrN2.m2   RUNNING Nov 05 13:00
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow1222_for_N1vrN2
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow1222_for_N1vrN2.m2  | M2 &>  SolveK4_N_allow1222_for_N1vrN2_out.txt

 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow1222_for_N1vrN2
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow2222_for_N1vrN2.m2   RUNNING Nov 05 13:00
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow2222_for_N1vrN2
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow2222_for_N1vrN2.m2  | M2 &>  SolveK4_N_allow2222_for_N1vrN2_out.txt
 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow2222_for_N1vrN2
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow1112_for_N1vrN3.m2   RUNNING Nov 05 13:00
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow1112_for_N1vrN3
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow1112_for_N1vrN3.m2  | M2 &>  SolveK4_N_allow1112_for_N1vrN3_out.txt
 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow1112_for_N1vrN3
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow1122_for_N1vrN3.m2   RUNNING Nov 05 13:00
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow1122_for_N1vrN3
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow1122_for_N1vrN3.m2  | M2 &>  SolveK4_N_allow1122_for_N1vrN3_out.txt
 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow1122_for_N1vrN3
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow1222_for_N1vrN3.m2   RUNNING Nov 05 13:00
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow1222_for_N1vrN3
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow1222_for_N1vrN3.m2  | M2 &>  SolveK4_N_allow1222_for_N1vrN3_out.txt
 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow1222_for_N1vrN3
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow2222_for_N1vrN3.m2   RUNNING Nov 05 13:00
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow2222_for_N1vrN3
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow2222_for_N1vrN3.m2  | M2 &>  SolveK4_N_allow2222_for_N1vrN3_out.txt
 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow2222_for_N1vrN3
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow1112_for_N1vrN4.m2   FINISH
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow1112_for_N1vrN4
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow1112_for_N1vrN4.m2  | M2 &>  SolveK4_N_allow1112_for_N1vrN4_out.txt
 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow1112_for_N1vrN4
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow1122_for_N1vrN4.m2   RUNNING Nov 05 13:00
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow1122_for_N1vrN4
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow1122_for_N1vrN4.m2  | M2 &>  SolveK4_N_allow1122_for_N1vrN4_out.txt
 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow1122_for_N1vrN4
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow1222_for_N1vrN4.m2   RUNNING Nov 05 13:00
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow1222_for_N1vrN4
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow1222_for_N1vrN4.m2  | M2 &>  SolveK4_N_allow1222_for_N1vrN4_out.txt
 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow1222_for_N1vrN4
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

### To run  SolveK4_N_allow2222_for_N1vrN4.m2   RUNNING Nov 05 13:00
 ```shell
 ssh acoencoria@solislemus-001.discovery.wisc.edu
 FpD2!CTe
 cd /mnt/dv/wid/projects1/SolisLemus-ArrigoCC/
 screen -S  SolveK4_N_allow2222_for_N1vrN4
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 module load M2-1.14
 cat  SolveK4_N_allow2222_for_N1vrN4.m2  | M2 &>  SolveK4_N_allow2222_for_N1vrN4_out.txt
 ```

 Start Nov 04 19:00
 ```shell
 screen -r  SolveK4_N_allow2222_for_N1vrN4
 # Ctrl+a, d = to detach the screen
 # Ctrl+a, k = to KILL the screen
 ```

# To quit the cluster just type...

```
exit
```



## Copy from cluster to local folder
