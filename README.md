# How_to_use_Macaulay2_with_R

In this repository we present how to use Macaulay2 using R. In particular, we will show how to generate `.m2` files with R and then transform their output to use it on LaTeX.

To explain how this code works, let us find the solution to the system of equations:
```
x-2*y+3z=7
2*x+y+z=4
-3*x+2*y-2*z=-10
```

We are assuming that the Macaulay2 software is already installed in the computer. This software could be downloaded from [here](http://www2.macaulay2.com/Macaulay2/). 

## Generating .m2 files

First, we need to generate the `.m2`files. To this end, let us define the next set of variables
```
initial_comments <- "This is a .m2 file generated by the function gen_m2_file\n Author: Arrigo Coen" # beginning comments 
text_to_run <- "R = QQ[x,y,z] \nI = ideal(x-2*y+3*z-7,2*x+y+z-4,-3*x+2*y-2*z+10)\n primaryDecomposition I" # the equation to run
input_folder_m2_files <- "Macaulay2_input" # the folder were the .m2 files will be stored
output_folder_m2_files <- "Macaulay2_output" # the folder were the output files of the .m2 files will be save
input_file_name <- "Solving_equation_with_Macaulay2" # name of the .m2 file that we generate
output_file_name = "Solving_equation_with_Macaulay2_OUT" # name of output txt file
```
Using these variables the function `gen_m2_file` will generate a file named `Solving_equation_with_Macaulay2.m2` with the next content:
![Test Image 1](Figures/Fig_save_as_wls.png)

Moreover, if we have a vector with the equations that we want to solve, we could use the function `gen_eq_solver_text_for_m2_files`. This function use the next input and generates the variable `text_to_run`
```
vec_equations = c("x-2*y+3*z-7","2*x+y+z-4","-3*x+2*y-2*z+10")
vec_variables = c("x","y","z")
text_to_run = gen_eq_solver_text_for_m2_files(vec_variables, vec_equations)
```


## Running M2 files

Now, we want to run the `.m2` files in the terminal. To this end, we use the following command:
```
cat Solving_equation_with_Macaulay2.m2 | M2 &> Solving_equation_with_Macaulay2_out.txt
```
This comment will run the file `Solving_equation_with_Macaulay2.m2` and print its output on the file `Solving_equation_with_Macaulay2_out.txt`. 

To do this automatically using R, we could run the next commands
```
run_M2_Terminal_using_R(input_file_name,output_file_name,input_folder_m2_files,output_folder_m2_files)
```

## From M2 output to LaTeX



# Other stuff


## Equations

R = QQ[z0,z1,z11,zR0,zR1,zR10,gam,gamR]
I = ideal(1-(2/3)*z11-(1-gamR)*(1-(2/3)*zR0*zR10)+gamR*(1-(2/3)*zR10),(1/3)*z11-(1-gamR)*(1/3)*zR0*zR10+gamR*(1/3)*zR10,(1/3)*z11-(1-gamR)*(1/3)*zR0*zR10+gamR*(1/3)*zR10,(1-gam)*(1-(2/3)*z11)+gam*(1-(2/3)*z0*z11)-(1-gamR)*(1-(2/3)*zR1*zR0*zR10)+gamR*(1-(2/3)*zR10),(1-gam)*(1/3)*z11+gam*(1/3)*z0*z11-(1-gamR)*(1/3)*zR1*zR0*zR10+gamR*(1/3)*zR10,(1-gam)*(1/3)*z11+gam*(1/3)*z0*z11-(1-gamR)*(1/3)*zR1*zR0*zR10+gamR*(1/3)*zR10,(1-gam)*(1-(2/3)*z1)+gam*(1/3)*z0-(1-gamR)*(1-(2/3)*zR1)+gamR*(1/3)*zR0,(1-gam)*(1/3)*z1+gam*(1-(2/3)*z0)-(1-gamR)*(1/3)*zR1+gamR*(1-(2/3)*zR0),(1-gam)*(1/3)*z1+gam*(1/3)*z0-(1-gamR)*(1/3)*zR1+gamR*(1/3)*zR0,(1-gam)*(1-(2/3)*z1*z11)+gam*(1-(2/3)*z11)-1-(2/3)*zR0*zR10,(1-gam)*(1/3)*z1*z11+gam*(1/3)*z11-(1/3)*zR0*zR10,(1-gam)*(1/3)*z1*z11+gam*(1/3)*z11-(1/3)*zR0*zR10)
primaryDecomposition I


R = QQ[x,y,z]
I = ideal(x-2*y+3*z-7,2*x+y+z-4,-3*x+2*y-2*z+10)
primaryDecomposition I


x-2*y+3z-7
2*x+y+z-4
-3*x+2*y-2*z+10

x-2*y+3z-7,2*x+y+z-4,-3*x+2*y-2*z+10)



Some commands
```
cd "/Users/arrigocoen/Dropbox/GitHub/2020 Arrigo Repos/How_to_use_Macaulay2_with_R"
cat My_Macaulay2_file.m2 | M2 &> My_Macaulay2_file_out.txt

cat My_Macaulay2_file2.m2 | M2 &> My_Macaulay2_file2_out.txt


cat My_Macaulay2_file3.m2 | M2 &> My_Macaulay2_file3_out.txt

``` 

A useful github with many Macaulay2 repositories is [this](https://github.com/Macaulay2) 
